{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\RepositoriosDesarrollo\\\\Euphrosyne\\\\WAI-Platform\\\\components\\\\Regla.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n\\tquery obtenerReglasUsuario {\\n\\t\\tobtenerReglasUsuario {\\n\\t\\t\\tid\\n\\t\\t\\tnombre\\n\\t\\t\\tapellido\\n\\t\\t\\tempresa \\n\\t\\t\\temail\\n\\t\\t}\\n\\t}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n\\tmutation eliminarRegla($id: ID!) {\\n\\t\\teliminarRegla(id: $id)\\n\\t}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport Swal from 'sweetalert2';\nimport { useMutation, gql } from '@apollo/client';\nimport Router from 'next/router';\nvar ELIMINAR_REGLA = gql(_templateObject());\nvar OBTENER_REGLAS_USUARIO = gql(_templateObject2());\n\nvar Regla = function Regla(_ref) {\n  _s();\n\n  var regla = _ref.regla;\n\n  // Mutation para eliminar regla\n  var _useMutation = useMutation(ELIMINAR_REGLA, {\n    update: function update(cache) {\n      // Obtener una copia del objeto de cache\n      var _cache$readQuery = cache.readQuery({\n        query: OBTENER_REGLAS_USUARIO\n      }),\n          obtenerReglasUsuario = _cache$readQuery.obtenerReglasUsuario; // Reescribir cache\n\n\n      cache.writeQuery({\n        query: OBTENER_REGLAS_USUARIO,\n        data: {\n          obtenerReglasUsuario: obtenerReglasUsuario.filter(function (reglaActual) {\n            return reglaActual.id !== id;\n          })\n        }\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      eliminarRegla = _useMutation2[0];\n\n  var nombre = regla.nombre,\n      apellido = regla.apellido,\n      empresa = regla.empresa,\n      email = regla.email,\n      id = regla.id; // Elimina un regla\n\n  var confirmarEliminarRegla = function confirmarEliminarRegla() {\n    Swal.fire({\n      title: \"¿Deseas eliminar a este regla?\",\n      text: \"Esta acción no se puede deshacer\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: \"Si, Eliminar!\",\n      cancelButtonText: \"No, Cancelar\"\n    }).then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(result) {\n        var _yield$eliminarRegla, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!result.value) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.prev = 1;\n                _context.next = 4;\n                return eliminarRegla({\n                  variables: {\n                    id: id\n                  }\n                });\n\n              case 4:\n                _yield$eliminarRegla = _context.sent;\n                data = _yield$eliminarRegla.data;\n                // Mostrar una alerta\n                Swal.fire('Eliminado!', data.eliminarRegla, 'success');\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  };\n\n  var editarRegla = function editarRegla() {\n    Router.push({\n      pathname: '/editarregla/[id]',\n      query: {\n        id: id\n      }\n    });\n  };\n\n  return __jsx(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 3\n    }\n  }, __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }\n  }, tipo), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 4\n    }\n  }, condicion), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 4\n    }\n  }, regla), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: function onClick() {\n      return confirmarEliminarRegla();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, \"Eliminar\", __jsx(\"svg\", {\n    fill: \"none\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    className: \"w-5 h-5 ml-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 6\n    }\n  }, __jsx(\"path\", {\n    d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  })))), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 4\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: function onClick() {\n      return editarRegla();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, \"Editar\", __jsx(\"svg\", {\n    fill: \"none\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    className: \"w-5 h-5 ml-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 6\n    }\n  }, __jsx(\"path\", {\n    d: \"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  })))));\n};\n\n_s(Regla, \"VpiS22eYC9PCsSHsLymuv8Ea9IU=\", false, function () {\n  return [useMutation];\n});\n\n_c = Regla;\nexport default Regla;\n\nvar _c;\n\n$RefreshReg$(_c, \"Regla\");","map":{"version":3,"sources":["C:/RepositoriosDesarrollo/Euphrosyne/WAI-Platform/components/Regla.js"],"names":["React","Swal","useMutation","gql","Router","ELIMINAR_REGLA","OBTENER_REGLAS_USUARIO","Regla","regla","update","cache","readQuery","query","obtenerReglasUsuario","writeQuery","data","filter","reglaActual","id","eliminarRegla","nombre","apellido","empresa","email","confirmarEliminarRegla","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","value","variables","console","log","editarRegla","push","pathname","tipo","condicion"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Swal from 'sweetalert2';\r\nimport { useMutation, gql} from '@apollo/client';\r\nimport Router from 'next/router';\r\n\r\nconst ELIMINAR_REGLA = gql `\r\n\tmutation eliminarRegla($id: ID!) {\r\n\t\teliminarRegla(id: $id)\r\n\t}\r\n`;\r\n\r\nconst OBTENER_REGLAS_USUARIO = gql `\r\n\tquery obtenerReglasUsuario {\r\n\t\tobtenerReglasUsuario {\r\n\t\t\tid\r\n\t\t\tnombre\r\n\t\t\tapellido\r\n\t\t\tempresa \r\n\t\t\temail\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nconst Regla = ({regla}) => {\r\n\r\n\t// Mutation para eliminar regla\r\n\tconst [ eliminarRegla ] = useMutation( ELIMINAR_REGLA, {\r\n\t\tupdate(cache) {\r\n\t\t\t// Obtener una copia del objeto de cache\r\n\t\t\tconst { obtenerReglasUsuario } = cache.readQuery({ query: OBTENER_REGLAS_USUARIO });\r\n\r\n\t\t\t// Reescribir cache\r\n\t\t\tcache.writeQuery({\r\n\t\t\t\tquery: OBTENER_REGLAS_USUARIO,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tobtenerReglasUsuario: obtenerReglasUsuario.filter( reglaActual => reglaActual.id !== id )\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t});\r\n\r\n\tconst { nombre, apellido, empresa, email, id } = regla;\r\n\r\n\t// Elimina un regla\r\n\tconst confirmarEliminarRegla = () => {\r\n\t\tSwal.fire({\r\n\t\t  title: \"¿Deseas eliminar a este regla?\",\r\n\t\t  text: \"Esta acción no se puede deshacer\",\r\n\t\t  icon: 'warning',\r\n\t\t  showCancelButton: true,\r\n\t\t  confirmButtonColor: '#3085d6',\r\n\t\t  cancelButtonColor: '#d33',\r\n\t\t  confirmButtonText: \"Si, Eliminar!\",\r\n\t\t  cancelButtonText: \"No, Cancelar\"\r\n\t\t}).then( async (result) => {\r\n\t\t  if (result.value) {\r\n\t\t  \ttry {\r\n\t\t  \t\t// Eliminar por ID\r\n\t\t  \t\tconst { data } = await eliminarRegla({\r\n\t\t  \t\t\tvariables: {\r\n\t\t  \t\t\t\tid\r\n\t\t  \t\t\t}\r\n\t\t  \t\t});\r\n\r\n\t\t  \t\t// Mostrar una alerta\r\n\t\t\t    Swal.fire(\r\n\t\t\t      'Eliminado!',\r\n\t\t\t      data.eliminarRegla,\r\n\t\t\t      'success'\r\n\t\t\t    )\r\n\t\t  \t} catch(error){\r\n\t\t  \t\tconsole.log(error);\r\n\t\t  \t}\r\n\t\t  }\r\n\t\t})\r\n\t}\r\n\r\n\tconst editarRegla = () => {\r\n\t\tRouter.push({\r\n\t\t\tpathname: '/editarregla/[id]',\r\n\t\t\tquery: { id }\r\n\t\t})\r\n\t}\r\n\r\n\treturn(\r\n\t\t<tr>\r\n\t\t\t<td className=\"border px-4 py-2\">{tipo}</td>\r\n\t\t\t<td className=\"border px-4 py-2\">{condicion}</td>\r\n\t\t\t<td className=\"border px-4 py-2\">{regla}</td>\r\n\t\t\t<td className=\"border px-4 py-2\">\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclassName=\"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\"\r\n\t\t\t\t\tonClick={() => confirmarEliminarRegla()}\r\n\t\t\t\t>\r\n\t\t\t\t\tEliminar\r\n\t\t\t\t\t<svg fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" className=\"w-5 h-5 ml-2\">\r\n\t\t\t\t\t\t<path d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t</td>\r\n\t\t\t<td className=\"border px-4 py-2\">\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tclassName=\"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\"\r\n\t\t\t\t\tonClick={() => editarRegla()}\r\n\t\t\t\t>\r\n\t\t\t\t\tEditar\r\n\t\t\t\t\t<svg fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" className=\"w-5 h-5 ml-2\">\r\n\t\t\t\t\t\t<path d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"></path>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t);\r\n}\r\n\r\nexport default Regla;"]},"metadata":{},"sourceType":"module"}